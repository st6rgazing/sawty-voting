/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/debug-add-secret/route";
exports.ids = ["app/api/debug-add-secret/route"];
exports.modules = {

/***/ "(rsc)/./app/api/debug-add-secret/route.ts":
/*!*******************************************!*\
  !*** ./app/api/debug-add-secret/route.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/.pnpm/next@15.2.4_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_store__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/store */ \"(rsc)/./lib/store.ts\");\n/* harmony import */ var _lib_kv_storage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/kv-storage */ \"(rsc)/./lib/kv-storage.ts\");\n\n\n\n// This endpoint is for development/testing only\n// In production, this should be protected or removed\nasync function POST(request) {\n    try {\n        // Only allow in development mode\n        if (false) {}\n        const { secretId, email } = await request.json();\n        if (!secretId || !email) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                message: \"Secret ID and email are required.\"\n            }, {\n                status: 400\n            });\n        }\n        // Add the secret\n        await (0,_lib_store__WEBPACK_IMPORTED_MODULE_1__.addSecret)(secretId, email);\n        // Verify it was saved\n        const savedEmail = await (0,_lib_kv_storage__WEBPACK_IMPORTED_MODULE_2__.getKV)(`secret:${secretId}`);\n        const savedSecretId = await (0,_lib_kv_storage__WEBPACK_IMPORTED_MODULE_2__.getKV)(`email:${email}`);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: \"Test secret added successfully\",\n            secretId,\n            email,\n            verification: {\n                savedEmail,\n                savedSecretId,\n                matches: savedEmail === email && savedSecretId === secretId\n            }\n        });\n    } catch (error) {\n        console.error(\"Error adding debug secret:\", error);\n        const errorMessage = error instanceof Error ? `${error.name}: ${error.message}` : String(error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: \"Error adding secret. See server logs.\",\n            error: errorMessage\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2RlYnVnLWFkZC1zZWNyZXQvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUEwQztBQUNIO0FBQ0M7QUFFeEMsZ0RBQWdEO0FBQ2hELHFEQUFxRDtBQUM5QyxlQUFlRyxLQUFLQyxPQUFnQjtJQUN6QyxJQUFJO1FBQ0YsaUNBQWlDO1FBQ2pDLElBQUlDLEtBQXFDLEVBQUUsRUFFMUM7UUFFRCxNQUFNLEVBQUVJLFFBQVEsRUFBRUMsS0FBSyxFQUFFLEdBQUcsTUFBTU4sUUFBUUUsSUFBSTtRQUU5QyxJQUFJLENBQUNHLFlBQVksQ0FBQ0MsT0FBTztZQUN2QixPQUFPVixxREFBWUEsQ0FBQ00sSUFBSSxDQUFDO2dCQUFFQyxTQUFTO1lBQW9DLEdBQUc7Z0JBQUVDLFFBQVE7WUFBSTtRQUMzRjtRQUVBLGlCQUFpQjtRQUNqQixNQUFNUCxxREFBU0EsQ0FBQ1EsVUFBVUM7UUFFMUIsc0JBQXNCO1FBQ3RCLE1BQU1DLGFBQWEsTUFBTVQsc0RBQUtBLENBQVMsQ0FBQyxPQUFPLEVBQUVPLFVBQVU7UUFDM0QsTUFBTUcsZ0JBQWdCLE1BQU1WLHNEQUFLQSxDQUFTLENBQUMsTUFBTSxFQUFFUSxPQUFPO1FBRTFELE9BQU9WLHFEQUFZQSxDQUFDTSxJQUFJLENBQUM7WUFDdkJDLFNBQVM7WUFDVEU7WUFDQUM7WUFDQUcsY0FBYztnQkFDWkY7Z0JBQ0FDO2dCQUNBRSxTQUFTSCxlQUFlRCxTQUFTRSxrQkFBa0JIO1lBQ3JEO1FBQ0Y7SUFDRixFQUFFLE9BQU9NLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLDhCQUE4QkE7UUFFNUMsTUFBTUUsZUFBZUYsaUJBQWlCRyxRQUFRLEdBQUdILE1BQU1JLElBQUksQ0FBQyxFQUFFLEVBQUVKLE1BQU1SLE9BQU8sRUFBRSxHQUFHYSxPQUFPTDtRQUV6RixPQUFPZixxREFBWUEsQ0FBQ00sSUFBSSxDQUN0QjtZQUNFQyxTQUFTO1lBQ1RRLE9BQU9FO1FBQ1QsR0FDQTtZQUFFVCxRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL21hcmlhbS9EZXNrdG9wL3Nhd3R5L3Nhd3R5LXZvdGluZy9hcHAvYXBpL2RlYnVnLWFkZC1zZWNyZXQvcm91dGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCJcbmltcG9ydCB7IGFkZFNlY3JldCB9IGZyb20gXCJAL2xpYi9zdG9yZVwiXG5pbXBvcnQgeyBnZXRLViB9IGZyb20gXCJAL2xpYi9rdi1zdG9yYWdlXCJcblxuLy8gVGhpcyBlbmRwb2ludCBpcyBmb3IgZGV2ZWxvcG1lbnQvdGVzdGluZyBvbmx5XG4vLyBJbiBwcm9kdWN0aW9uLCB0aGlzIHNob3VsZCBiZSBwcm90ZWN0ZWQgb3IgcmVtb3ZlZFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogUmVxdWVzdCkge1xuICB0cnkge1xuICAgIC8vIE9ubHkgYWxsb3cgaW4gZGV2ZWxvcG1lbnQgbW9kZVxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBtZXNzYWdlOiBcIk5vdCBhdmFpbGFibGUgaW4gcHJvZHVjdGlvblwiIH0sIHsgc3RhdHVzOiA0MDMgfSlcbiAgICB9XG5cbiAgICBjb25zdCB7IHNlY3JldElkLCBlbWFpbCB9ID0gYXdhaXQgcmVxdWVzdC5qc29uKClcblxuICAgIGlmICghc2VjcmV0SWQgfHwgIWVtYWlsKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBtZXNzYWdlOiBcIlNlY3JldCBJRCBhbmQgZW1haWwgYXJlIHJlcXVpcmVkLlwiIH0sIHsgc3RhdHVzOiA0MDAgfSlcbiAgICB9XG5cbiAgICAvLyBBZGQgdGhlIHNlY3JldFxuICAgIGF3YWl0IGFkZFNlY3JldChzZWNyZXRJZCwgZW1haWwpXG4gICAgXG4gICAgLy8gVmVyaWZ5IGl0IHdhcyBzYXZlZFxuICAgIGNvbnN0IHNhdmVkRW1haWwgPSBhd2FpdCBnZXRLVjxzdHJpbmc+KGBzZWNyZXQ6JHtzZWNyZXRJZH1gKVxuICAgIGNvbnN0IHNhdmVkU2VjcmV0SWQgPSBhd2FpdCBnZXRLVjxzdHJpbmc+KGBlbWFpbDoke2VtYWlsfWApXG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgIG1lc3NhZ2U6IFwiVGVzdCBzZWNyZXQgYWRkZWQgc3VjY2Vzc2Z1bGx5XCIsXG4gICAgICBzZWNyZXRJZCxcbiAgICAgIGVtYWlsLFxuICAgICAgdmVyaWZpY2F0aW9uOiB7XG4gICAgICAgIHNhdmVkRW1haWwsXG4gICAgICAgIHNhdmVkU2VjcmV0SWQsXG4gICAgICAgIG1hdGNoZXM6IHNhdmVkRW1haWwgPT09IGVtYWlsICYmIHNhdmVkU2VjcmV0SWQgPT09IHNlY3JldElkXG4gICAgICB9XG4gICAgfSlcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgYWRkaW5nIGRlYnVnIHNlY3JldDpcIiwgZXJyb3IpXG5cbiAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gYCR7ZXJyb3IubmFtZX06ICR7ZXJyb3IubWVzc2FnZX1gIDogU3RyaW5nKGVycm9yKVxuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAge1xuICAgICAgICBtZXNzYWdlOiBcIkVycm9yIGFkZGluZyBzZWNyZXQuIFNlZSBzZXJ2ZXIgbG9ncy5cIixcbiAgICAgICAgZXJyb3I6IGVycm9yTWVzc2FnZSxcbiAgICAgIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH0sXG4gICAgKVxuICB9XG59ICJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJhZGRTZWNyZXQiLCJnZXRLViIsIlBPU1QiLCJyZXF1ZXN0IiwicHJvY2VzcyIsImpzb24iLCJtZXNzYWdlIiwic3RhdHVzIiwic2VjcmV0SWQiLCJlbWFpbCIsInNhdmVkRW1haWwiLCJzYXZlZFNlY3JldElkIiwidmVyaWZpY2F0aW9uIiwibWF0Y2hlcyIsImVycm9yIiwiY29uc29sZSIsImVycm9yTWVzc2FnZSIsIkVycm9yIiwibmFtZSIsIlN0cmluZyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/debug-add-secret/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/kv-storage.ts":
/*!***************************!*\
  !*** ./lib/kv-storage.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addVote: () => (/* binding */ addVote),\n/* harmony export */   deleteKV: () => (/* binding */ deleteKV),\n/* harmony export */   deleteSecret: () => (/* binding */ deleteSecret),\n/* harmony export */   getAllSecrets: () => (/* binding */ getAllSecrets),\n/* harmony export */   getAllVotes: () => (/* binding */ getAllVotes),\n/* harmony export */   getKV: () => (/* binding */ getKV),\n/* harmony export */   getSecret: () => (/* binding */ getSecret),\n/* harmony export */   getVoteCount: () => (/* binding */ getVoteCount),\n/* harmony export */   redis: () => (/* binding */ redis),\n/* harmony export */   setKV: () => (/* binding */ setKV),\n/* harmony export */   setSecret: () => (/* binding */ setSecret)\n/* harmony export */ });\n/* harmony import */ var _upstash_redis__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @upstash/redis */ \"(rsc)/./node_modules/.pnpm/@upstash+redis@1.34.8/node_modules/@upstash/redis/nodejs.mjs\");\n\n// Initialize Redis with better error handling\nlet redis;\ntry {\n    // Explicit configuration for Upstash Redis\n    if ( true && process.env.UPSTASH_REDIS_REST_TOKEN) {\n        redis = new _upstash_redis__WEBPACK_IMPORTED_MODULE_0__.Redis({\n            url: \"https://evolving-grouse-29506.upstash.io\",\n            token: process.env.UPSTASH_REDIS_REST_TOKEN\n        });\n        console.log(\"Initialized Redis with UPSTASH_REDIS credentials\");\n    } else if ( true && process.env.KV_REST_API_TOKEN) {\n        redis = new _upstash_redis__WEBPACK_IMPORTED_MODULE_0__.Redis({\n            url: \"https://evolving-grouse-29506.upstash.io\",\n            token: process.env.KV_REST_API_TOKEN\n        });\n        console.log(\"Initialized Redis with KV_REST_API credentials\");\n    } else {\n        redis = _upstash_redis__WEBPACK_IMPORTED_MODULE_0__.Redis.fromEnv();\n        console.log(\"Initialized Redis from environment variables\");\n    }\n    // Quick test to verify Redis connection\n    (async ()=>{\n        try {\n            await redis.set(\"test-connection\", \"working\");\n            const testValue = await redis.get(\"test-connection\");\n            console.log(`Redis connection test: ${testValue}`);\n        } catch (err) {\n            console.error(\"Redis connection test failed:\", err);\n        }\n    })();\n} catch (error) {\n    console.error(\"Failed to initialize Redis:\", error);\n    // Create a dummy Redis instance with basic methods\n    redis = {\n        set: async (key, value)=>{\n            console.warn(`[Mock Redis] SET ${key}`);\n            return \"OK\";\n        },\n        get: async (key)=>{\n            console.warn(`[Mock Redis] GET ${key}`);\n            return null;\n        },\n        del: async (key)=>{\n            console.warn(`[Mock Redis] DEL ${key}`);\n            return 1;\n        },\n        scan: async (cursor, options)=>{\n            console.warn(`[Mock Redis] SCAN ${cursor}`);\n            return {\n                cursor: 0,\n                keys: []\n            };\n        },\n        keys: async (pattern)=>{\n            console.warn(`[Mock Redis] KEYS ${pattern}`);\n            return [];\n        }\n    };\n    console.warn(\"Using mock Redis instance due to initialization failure\");\n}\n// Simple in-memory fallback for local development\nconst localCache = new Map();\n\n// Basic key-value operations with fallback to local cache\n// Save a key-value pair\nasync function setKV(key, value) {\n    try {\n        // Try Redis first\n        await redis.set(key, value);\n        // Also save to local cache as backup\n        localCache.set(key, value);\n    } catch (error) {\n        console.error(`Error in setKV for key ${key}:`, error);\n        // Fallback to local cache\n        localCache.set(key, value);\n    }\n}\n// Get a value by key\nasync function getKV(key) {\n    try {\n        // Try Redis first\n        const value = await redis.get(key);\n        if (value !== null) return value;\n        // Fallback to local cache\n        const cachedValue = localCache.get(key);\n        return cachedValue ? JSON.parse(cachedValue) : null;\n    } catch (error) {\n        console.error(`Error in getKV for key ${key}:`, error);\n        // Fallback to local cache\n        const cachedValue = localCache.get(key);\n        return cachedValue ? JSON.parse(cachedValue) : null;\n    }\n}\n// Delete a key\nasync function deleteKV(key) {\n    try {\n        // Try Redis first\n        await redis.del(key);\n        // Also remove from local cache\n        localCache.delete(key);\n    } catch (error) {\n        console.error(`Error in deleteKV for key ${key}:`, error);\n        // At least remove from local cache\n        localCache.delete(key);\n    }\n}\n// Secret-specific functions\nasync function getSecret(secretId) {\n    try {\n        const email = await getKV(`secret:${secretId}`);\n        if (!email) return null;\n        return {\n            secretId,\n            email,\n            createdAt: await getKV(`secret:${secretId}:createdAt`) || new Date().toISOString()\n        };\n    } catch (error) {\n        console.error(`Error getting secret with ID ${secretId}:`, error);\n        return null;\n    }\n}\nasync function setSecret(secret) {\n    try {\n        await setKV(`secret:${secret.secretId}`, secret.email);\n        await setKV(`email:${secret.email}`, secret.secretId);\n        await setKV(`secret:${secret.secretId}:createdAt`, secret.createdAt);\n    } catch (error) {\n        console.error(`Error setting secret with ID ${secret.secretId}:`, error);\n        throw error;\n    }\n}\nasync function deleteSecret(secretId) {\n    try {\n        const secret = await getSecret(secretId);\n        if (secret && secret.email) {\n            await deleteKV(`email:${secret.email}`);\n        }\n        await deleteKV(`secret:${secretId}`);\n        await deleteKV(`secret:${secretId}:createdAt`);\n    } catch (error) {\n        console.error(`Error deleting secret with ID ${secretId}:`, error);\n        throw error;\n    }\n}\nasync function getAllSecrets() {\n    try {\n        // This is a simple implementation and may not scale well with large datasets\n        const secrets = [];\n        let cursor = 0;\n        do {\n            try {\n                // For Upstash Redis, scan returns [nextCursor, keysArray]\n                const result = await redis.scan(cursor, {\n                    match: \"secret:*\",\n                    count: 100\n                });\n                // Update cursor - first element is the next cursor\n                cursor = parseInt(result[0]);\n                // Process keys - second element is the array of keys\n                const keys = result[1];\n                for (const key of keys){\n                    // Only process the main secret keys (not metadata)\n                    if (key.includes(':createdAt')) continue;\n                    const secretId = key.replace('secret:', '');\n                    const secret = await getSecret(secretId);\n                    if (secret) {\n                        secrets.push(secret);\n                    }\n                }\n            } catch (error) {\n                console.error(\"Error during scan in getAllSecrets:\", error);\n                break;\n            }\n        }while (cursor !== 0);\n        return secrets;\n    } catch (error) {\n        console.error(\"Error in getAllSecrets:\", error);\n        return [];\n    }\n}\n// Vote-specific functions\nasync function addVote(vote) {\n    try {\n        await setKV(`vote:${vote.secretId}`, JSON.stringify(vote));\n    } catch (error) {\n        console.error(`Error adding vote with secret ID ${vote.secretId}:`, error);\n        throw error;\n    }\n}\nasync function getAllVotes() {\n    try {\n        const votes = [];\n        let cursor = 0;\n        do {\n            try {\n                // For Upstash Redis, scan returns [nextCursor, keysArray]\n                const result = await redis.scan(cursor, {\n                    match: \"vote:*\",\n                    count: 100\n                });\n                // Update cursor - first element is the next cursor\n                cursor = parseInt(result[0]);\n                // Process keys - second element is the array of keys\n                const keys = result[1];\n                for (const key of keys){\n                    const voteJson = await getKV(key);\n                    if (voteJson) {\n                        try {\n                            const vote = JSON.parse(voteJson);\n                            votes.push(vote);\n                        } catch (parseError) {\n                            console.error(`Error parsing vote from key ${key}:`, parseError);\n                        }\n                    }\n                }\n            } catch (error) {\n                console.error(\"Error during scan in getAllVotes:\", error);\n                break;\n            }\n        }while (cursor !== 0);\n        return votes;\n    } catch (error) {\n        console.error(\"Error in getAllVotes:\", error);\n        return [];\n    }\n}\nasync function getVoteCount() {\n    try {\n        const votes = await getAllVotes();\n        return votes.length;\n    } catch (error) {\n        console.error(\"Error in getVoteCount:\", error);\n        return 0;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixPQUFPc0IsTUFBTSxDQUFDLEVBQUU7Z0JBRXRCLEtBQUssTUFBTTdCLE9BQU9PLEtBQU07b0JBQ3RCLE1BQU1rQyxXQUFXLE1BQU03QixNQUFjWjtvQkFDckMsSUFBSXlDLFVBQVU7d0JBQ1osSUFBSTs0QkFDRixNQUFNSixPQUFPdkIsS0FBS0MsS0FBSyxDQUFDMEI7NEJBQ3hCRCxNQUFNTCxJQUFJLENBQUNFO3dCQUNiLEVBQUUsT0FBT0ssWUFBWTs0QkFDbkJwRCxRQUFRUyxLQUFLLENBQUMsQ0FBQyw0QkFBNEIsRUFBRUMsSUFBSSxDQUFDLENBQUMsRUFBRTBDO3dCQUN2RDtvQkFDRjtnQkFDRjtZQUNGLEVBQUUsT0FBTzNDLE9BQU87Z0JBQ2RULFFBQVFTLEtBQUssQ0FBQyxxQ0FBcUNBO2dCQUNuRDtZQUNGO1FBQ0YsUUFBU00sV0FBVyxHQUFHO1FBRXZCLE9BQU9tQztJQUNULEVBQUUsT0FBT3pDLE9BQU87UUFDZFQsUUFBUVMsS0FBSyxDQUFDLHlCQUF5QkE7UUFDdkMsT0FBTyxFQUFFO0lBQ1g7QUFDRjtBQUVPLGVBQWU0QztJQUNwQixJQUFJO1FBQ0YsTUFBTUgsUUFBUSxNQUFNRDtRQUNwQixPQUFPQyxNQUFNSSxNQUFNO0lBQ3JCLEVBQUUsT0FBTzdDLE9BQU87UUFDZFQsUUFBUVMsS0FBSyxDQUFDLDBCQUEwQkE7UUFDeEMsT0FBTztJQUNUO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYXJpYW0vRGVza3RvcC9zYXd0eS9zYXd0eS12b3RpbmcvbGliL2t2LXN0b3JhZ2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUmVkaXMgfSBmcm9tICdAdXBzdGFzaC9yZWRpcyc7XG5cbi8vIEluaXRpYWxpemUgUmVkaXMgd2l0aCBiZXR0ZXIgZXJyb3IgaGFuZGxpbmdcbmxldCByZWRpczogUmVkaXM7XG5cbnRyeSB7XG4gIC8vIEV4cGxpY2l0IGNvbmZpZ3VyYXRpb24gZm9yIFVwc3Rhc2ggUmVkaXNcbiAgaWYgKHByb2Nlc3MuZW52LlVQU1RBU0hfUkVESVNfUkVTVF9VUkwgJiYgcHJvY2Vzcy5lbnYuVVBTVEFTSF9SRURJU19SRVNUX1RPS0VOKSB7XG4gICAgcmVkaXMgPSBuZXcgUmVkaXMoe1xuICAgICAgdXJsOiBwcm9jZXNzLmVudi5VUFNUQVNIX1JFRElTX1JFU1RfVVJMLFxuICAgICAgdG9rZW46IHByb2Nlc3MuZW52LlVQU1RBU0hfUkVESVNfUkVTVF9UT0tFTixcbiAgICB9KTtcbiAgICBjb25zb2xlLmxvZyhcIkluaXRpYWxpemVkIFJlZGlzIHdpdGggVVBTVEFTSF9SRURJUyBjcmVkZW50aWFsc1wiKTtcbiAgfVxuICAvLyBUcnkgVmVyY2VsIEtWIGNyZWRlbnRpYWxzXG4gIGVsc2UgaWYgKHByb2Nlc3MuZW52LktWX1JFU1RfQVBJX1VSTCAmJiBwcm9jZXNzLmVudi5LVl9SRVNUX0FQSV9UT0tFTikge1xuICAgIHJlZGlzID0gbmV3IFJlZGlzKHtcbiAgICAgIHVybDogcHJvY2Vzcy5lbnYuS1ZfUkVTVF9BUElfVVJMLFxuICAgICAgdG9rZW46IHByb2Nlc3MuZW52LktWX1JFU1RfQVBJX1RPS0VOLFxuICAgIH0pO1xuICAgIGNvbnNvbGUubG9nKFwiSW5pdGlhbGl6ZWQgUmVkaXMgd2l0aCBLVl9SRVNUX0FQSSBjcmVkZW50aWFsc1wiKTtcbiAgfVxuICAvLyBGYWxsYmFjayB0byBlbnZpcm9ubWVudCB2YXJpYWJsZXNcbiAgZWxzZSB7XG4gICAgcmVkaXMgPSBSZWRpcy5mcm9tRW52KCk7XG4gICAgY29uc29sZS5sb2coXCJJbml0aWFsaXplZCBSZWRpcyBmcm9tIGVudmlyb25tZW50IHZhcmlhYmxlc1wiKTtcbiAgfVxuICBcbiAgLy8gUXVpY2sgdGVzdCB0byB2ZXJpZnkgUmVkaXMgY29ubmVjdGlvblxuICAoYXN5bmMgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBhd2FpdCByZWRpcy5zZXQoXCJ0ZXN0LWNvbm5lY3Rpb25cIiwgXCJ3b3JraW5nXCIpO1xuICAgICAgY29uc3QgdGVzdFZhbHVlID0gYXdhaXQgcmVkaXMuZ2V0KFwidGVzdC1jb25uZWN0aW9uXCIpO1xuICAgICAgY29uc29sZS5sb2coYFJlZGlzIGNvbm5lY3Rpb24gdGVzdDogJHt0ZXN0VmFsdWV9YCk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiUmVkaXMgY29ubmVjdGlvbiB0ZXN0IGZhaWxlZDpcIiwgZXJyKTtcbiAgICB9XG4gIH0pKCk7XG4gIFxufSBjYXRjaCAoZXJyb3IpIHtcbiAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBpbml0aWFsaXplIFJlZGlzOlwiLCBlcnJvcik7XG4gIC8vIENyZWF0ZSBhIGR1bW15IFJlZGlzIGluc3RhbmNlIHdpdGggYmFzaWMgbWV0aG9kc1xuICByZWRpcyA9IHtcbiAgICBzZXQ6IGFzeW5jIChrZXk6IHN0cmluZywgdmFsdWU6IGFueSkgPT4ge1xuICAgICAgY29uc29sZS53YXJuKGBbTW9jayBSZWRpc10gU0VUICR7a2V5fWApO1xuICAgICAgcmV0dXJuIFwiT0tcIjtcbiAgICB9LFxuICAgIGdldDogYXN5bmMgKGtleTogc3RyaW5nKSA9PiB7XG4gICAgICBjb25zb2xlLndhcm4oYFtNb2NrIFJlZGlzXSBHRVQgJHtrZXl9YCk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuICAgIGRlbDogYXN5bmMgKGtleTogc3RyaW5nKSA9PiB7XG4gICAgICBjb25zb2xlLndhcm4oYFtNb2NrIFJlZGlzXSBERUwgJHtrZXl9YCk7XG4gICAgICByZXR1cm4gMTtcbiAgICB9LFxuICAgIHNjYW46IGFzeW5jIChjdXJzb3I6IG51bWJlciwgb3B0aW9uczogYW55KSA9PiB7XG4gICAgICBjb25zb2xlLndhcm4oYFtNb2NrIFJlZGlzXSBTQ0FOICR7Y3Vyc29yfWApO1xuICAgICAgcmV0dXJuIHsgY3Vyc29yOiAwLCBrZXlzOiBbXSB9O1xuICAgIH0sXG4gICAga2V5czogYXN5bmMgKHBhdHRlcm46IHN0cmluZykgPT4ge1xuICAgICAgY29uc29sZS53YXJuKGBbTW9jayBSZWRpc10gS0VZUyAke3BhdHRlcm59YCk7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICB9IGFzIHVua25vd24gYXMgUmVkaXM7XG4gIGNvbnNvbGUud2FybihcIlVzaW5nIG1vY2sgUmVkaXMgaW5zdGFuY2UgZHVlIHRvIGluaXRpYWxpemF0aW9uIGZhaWx1cmVcIik7XG59XG5cbi8vIFNpbXBsZSBpbi1tZW1vcnkgZmFsbGJhY2sgZm9yIGxvY2FsIGRldmVsb3BtZW50XG5jb25zdCBsb2NhbENhY2hlID0gbmV3IE1hcDxzdHJpbmcsIHN0cmluZz4oKTtcblxuZXhwb3J0IHsgcmVkaXMgfTtcblxuLy8gVHlwZXNcbmV4cG9ydCBpbnRlcmZhY2UgU2VjcmV0IHtcbiAgc2VjcmV0SWQ6IHN0cmluZztcbiAgZW1haWw6IHN0cmluZztcbiAgY3JlYXRlZEF0OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVm90ZSB7XG4gIHNlY3JldElkOiBzdHJpbmc7XG4gIGVuY3J5cHRlZFZvdGU6IHN0cmluZztcbiAgdGltZXN0YW1wOiBzdHJpbmc7XG59XG5cbi8vIEJhc2ljIGtleS12YWx1ZSBvcGVyYXRpb25zIHdpdGggZmFsbGJhY2sgdG8gbG9jYWwgY2FjaGVcbi8vIFNhdmUgYSBrZXktdmFsdWUgcGFpclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNldEtWKGtleTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKSB7XG4gIHRyeSB7XG4gICAgLy8gVHJ5IFJlZGlzIGZpcnN0XG4gICAgYXdhaXQgcmVkaXMuc2V0KGtleSwgdmFsdWUpO1xuICAgIC8vIEFsc28gc2F2ZSB0byBsb2NhbCBjYWNoZSBhcyBiYWNrdXBcbiAgICBsb2NhbENhY2hlLnNldChrZXksIHZhbHVlKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKGBFcnJvciBpbiBzZXRLViBmb3Iga2V5ICR7a2V5fTpgLCBlcnJvcik7XG4gICAgLy8gRmFsbGJhY2sgdG8gbG9jYWwgY2FjaGVcbiAgICBsb2NhbENhY2hlLnNldChrZXksIHZhbHVlKTtcbiAgfVxufVxuXG4vLyBHZXQgYSB2YWx1ZSBieSBrZXlcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRLVjxUID0gYW55PihrZXk6IHN0cmluZyk6IFByb21pc2U8VCB8IG51bGw+IHtcbiAgdHJ5IHtcbiAgICAvLyBUcnkgUmVkaXMgZmlyc3RcbiAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IHJlZGlzLmdldChrZXkpO1xuICAgIGlmICh2YWx1ZSAhPT0gbnVsbCkgcmV0dXJuIHZhbHVlIGFzIFQ7XG4gICAgXG4gICAgLy8gRmFsbGJhY2sgdG8gbG9jYWwgY2FjaGVcbiAgICBjb25zdCBjYWNoZWRWYWx1ZSA9IGxvY2FsQ2FjaGUuZ2V0KGtleSk7XG4gICAgcmV0dXJuIGNhY2hlZFZhbHVlID8gSlNPTi5wYXJzZShjYWNoZWRWYWx1ZSkgOiBudWxsO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGluIGdldEtWIGZvciBrZXkgJHtrZXl9OmAsIGVycm9yKTtcbiAgICAvLyBGYWxsYmFjayB0byBsb2NhbCBjYWNoZVxuICAgIGNvbnN0IGNhY2hlZFZhbHVlID0gbG9jYWxDYWNoZS5nZXQoa2V5KTtcbiAgICByZXR1cm4gY2FjaGVkVmFsdWUgPyBKU09OLnBhcnNlKGNhY2hlZFZhbHVlKSA6IG51bGw7XG4gIH1cbn1cblxuLy8gRGVsZXRlIGEga2V5XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlS1Yoa2V5OiBzdHJpbmcpIHtcbiAgdHJ5IHtcbiAgICAvLyBUcnkgUmVkaXMgZmlyc3RcbiAgICBhd2FpdCByZWRpcy5kZWwoa2V5KTtcbiAgICAvLyBBbHNvIHJlbW92ZSBmcm9tIGxvY2FsIGNhY2hlXG4gICAgbG9jYWxDYWNoZS5kZWxldGUoa2V5KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKGBFcnJvciBpbiBkZWxldGVLViBmb3Iga2V5ICR7a2V5fTpgLCBlcnJvcik7XG4gICAgLy8gQXQgbGVhc3QgcmVtb3ZlIGZyb20gbG9jYWwgY2FjaGVcbiAgICBsb2NhbENhY2hlLmRlbGV0ZShrZXkpO1xuICB9XG59XG5cbi8vIFNlY3JldC1zcGVjaWZpYyBmdW5jdGlvbnNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRTZWNyZXQoc2VjcmV0SWQ6IHN0cmluZyk6IFByb21pc2U8U2VjcmV0IHwgbnVsbD4ge1xuICB0cnkge1xuICAgIGNvbnN0IGVtYWlsID0gYXdhaXQgZ2V0S1Y8c3RyaW5nPihgc2VjcmV0OiR7c2VjcmV0SWR9YCk7XG4gICAgaWYgKCFlbWFpbCkgcmV0dXJuIG51bGw7XG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgIHNlY3JldElkLFxuICAgICAgZW1haWwsXG4gICAgICBjcmVhdGVkQXQ6IGF3YWl0IGdldEtWPHN0cmluZz4oYHNlY3JldDoke3NlY3JldElkfTpjcmVhdGVkQXRgKSB8fCBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKGBFcnJvciBnZXR0aW5nIHNlY3JldCB3aXRoIElEICR7c2VjcmV0SWR9OmAsIGVycm9yKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2V0U2VjcmV0KHNlY3JldDogU2VjcmV0KTogUHJvbWlzZTx2b2lkPiB7XG4gIHRyeSB7XG4gICAgYXdhaXQgc2V0S1YoYHNlY3JldDoke3NlY3JldC5zZWNyZXRJZH1gLCBzZWNyZXQuZW1haWwpO1xuICAgIGF3YWl0IHNldEtWKGBlbWFpbDoke3NlY3JldC5lbWFpbH1gLCBzZWNyZXQuc2VjcmV0SWQpO1xuICAgIGF3YWl0IHNldEtWKGBzZWNyZXQ6JHtzZWNyZXQuc2VjcmV0SWR9OmNyZWF0ZWRBdGAsIHNlY3JldC5jcmVhdGVkQXQpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIHNldHRpbmcgc2VjcmV0IHdpdGggSUQgJHtzZWNyZXQuc2VjcmV0SWR9OmAsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlU2VjcmV0KHNlY3JldElkOiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBzZWNyZXQgPSBhd2FpdCBnZXRTZWNyZXQoc2VjcmV0SWQpO1xuICAgIGlmIChzZWNyZXQgJiYgc2VjcmV0LmVtYWlsKSB7XG4gICAgICBhd2FpdCBkZWxldGVLVihgZW1haWw6JHtzZWNyZXQuZW1haWx9YCk7XG4gICAgfVxuICAgIGF3YWl0IGRlbGV0ZUtWKGBzZWNyZXQ6JHtzZWNyZXRJZH1gKTtcbiAgICBhd2FpdCBkZWxldGVLVihgc2VjcmV0OiR7c2VjcmV0SWR9OmNyZWF0ZWRBdGApO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGRlbGV0aW5nIHNlY3JldCB3aXRoIElEICR7c2VjcmV0SWR9OmAsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWxsU2VjcmV0cygpOiBQcm9taXNlPFNlY3JldFtdPiB7XG4gIHRyeSB7XG4gICAgLy8gVGhpcyBpcyBhIHNpbXBsZSBpbXBsZW1lbnRhdGlvbiBhbmQgbWF5IG5vdCBzY2FsZSB3ZWxsIHdpdGggbGFyZ2UgZGF0YXNldHNcbiAgICBjb25zdCBzZWNyZXRzOiBTZWNyZXRbXSA9IFtdO1xuICAgIGxldCBjdXJzb3IgPSAwO1xuICAgIFxuICAgIGRvIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIEZvciBVcHN0YXNoIFJlZGlzLCBzY2FuIHJldHVybnMgW25leHRDdXJzb3IsIGtleXNBcnJheV1cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVkaXMuc2NhbihjdXJzb3IsIHsgbWF0Y2g6IFwic2VjcmV0OipcIiwgY291bnQ6IDEwMCB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFVwZGF0ZSBjdXJzb3IgLSBmaXJzdCBlbGVtZW50IGlzIHRoZSBuZXh0IGN1cnNvclxuICAgICAgICBjdXJzb3IgPSBwYXJzZUludChyZXN1bHRbMF0pO1xuICAgICAgICBcbiAgICAgICAgLy8gUHJvY2VzcyBrZXlzIC0gc2Vjb25kIGVsZW1lbnQgaXMgdGhlIGFycmF5IG9mIGtleXNcbiAgICAgICAgY29uc3Qga2V5cyA9IHJlc3VsdFsxXTtcbiAgICAgICAgXG4gICAgICAgIGZvciAoY29uc3Qga2V5IG9mIGtleXMpIHtcbiAgICAgICAgICAvLyBPbmx5IHByb2Nlc3MgdGhlIG1haW4gc2VjcmV0IGtleXMgKG5vdCBtZXRhZGF0YSlcbiAgICAgICAgICBpZiAoa2V5LmluY2x1ZGVzKCc6Y3JlYXRlZEF0JykpIGNvbnRpbnVlO1xuICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IHNlY3JldElkID0ga2V5LnJlcGxhY2UoJ3NlY3JldDonLCAnJyk7XG4gICAgICAgICAgY29uc3Qgc2VjcmV0ID0gYXdhaXQgZ2V0U2VjcmV0KHNlY3JldElkKTtcbiAgICAgICAgICBpZiAoc2VjcmV0KSB7XG4gICAgICAgICAgICBzZWNyZXRzLnB1c2goc2VjcmV0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBkdXJpbmcgc2NhbiBpbiBnZXRBbGxTZWNyZXRzOlwiLCBlcnJvcik7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH0gd2hpbGUgKGN1cnNvciAhPT0gMCk7XG4gICAgXG4gICAgcmV0dXJuIHNlY3JldHM7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGluIGdldEFsbFNlY3JldHM6XCIsIGVycm9yKTtcbiAgICByZXR1cm4gW107XG4gIH1cbn1cblxuLy8gVm90ZS1zcGVjaWZpYyBmdW5jdGlvbnNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhZGRWb3RlKHZvdGU6IFZvdGUpOiBQcm9taXNlPHZvaWQ+IHtcbiAgdHJ5IHtcbiAgICBhd2FpdCBzZXRLVihgdm90ZToke3ZvdGUuc2VjcmV0SWR9YCwgSlNPTi5zdHJpbmdpZnkodm90ZSkpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGFkZGluZyB2b3RlIHdpdGggc2VjcmV0IElEICR7dm90ZS5zZWNyZXRJZH06YCwgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRBbGxWb3RlcygpOiBQcm9taXNlPFZvdGVbXT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHZvdGVzOiBWb3RlW10gPSBbXTtcbiAgICBsZXQgY3Vyc29yID0gMDtcbiAgICBcbiAgICBkbyB7XG4gICAgICB0cnkge1xuICAgICAgICAvLyBGb3IgVXBzdGFzaCBSZWRpcywgc2NhbiByZXR1cm5zIFtuZXh0Q3Vyc29yLCBrZXlzQXJyYXldXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJlZGlzLnNjYW4oY3Vyc29yLCB7IG1hdGNoOiBcInZvdGU6KlwiLCBjb3VudDogMTAwIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gVXBkYXRlIGN1cnNvciAtIGZpcnN0IGVsZW1lbnQgaXMgdGhlIG5leHQgY3Vyc29yXG4gICAgICAgIGN1cnNvciA9IHBhcnNlSW50KHJlc3VsdFswXSk7XG4gICAgICAgIFxuICAgICAgICAvLyBQcm9jZXNzIGtleXMgLSBzZWNvbmQgZWxlbWVudCBpcyB0aGUgYXJyYXkgb2Yga2V5c1xuICAgICAgICBjb25zdCBrZXlzID0gcmVzdWx0WzFdO1xuICAgICAgICBcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2Yga2V5cykge1xuICAgICAgICAgIGNvbnN0IHZvdGVKc29uID0gYXdhaXQgZ2V0S1Y8c3RyaW5nPihrZXkpO1xuICAgICAgICAgIGlmICh2b3RlSnNvbikge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgY29uc3Qgdm90ZSA9IEpTT04ucGFyc2Uodm90ZUpzb24pIGFzIFZvdGU7XG4gICAgICAgICAgICAgIHZvdGVzLnB1c2godm90ZSk7XG4gICAgICAgICAgICB9IGNhdGNoIChwYXJzZUVycm9yKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIHBhcnNpbmcgdm90ZSBmcm9tIGtleSAke2tleX06YCwgcGFyc2VFcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZHVyaW5nIHNjYW4gaW4gZ2V0QWxsVm90ZXM6XCIsIGVycm9yKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfSB3aGlsZSAoY3Vyc29yICE9PSAwKTtcbiAgICBcbiAgICByZXR1cm4gdm90ZXM7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGluIGdldEFsbFZvdGVzOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIFtdO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRWb3RlQ291bnQoKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB2b3RlcyA9IGF3YWl0IGdldEFsbFZvdGVzKCk7XG4gICAgcmV0dXJuIHZvdGVzLmxlbmd0aDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW4gZ2V0Vm90ZUNvdW50OlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIDA7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJSZWRpcyIsInJlZGlzIiwicHJvY2VzcyIsImVudiIsIlVQU1RBU0hfUkVESVNfUkVTVF9VUkwiLCJVUFNUQVNIX1JFRElTX1JFU1RfVE9LRU4iLCJ1cmwiLCJ0b2tlbiIsImNvbnNvbGUiLCJsb2ciLCJLVl9SRVNUX0FQSV9VUkwiLCJLVl9SRVNUX0FQSV9UT0tFTiIsImZyb21FbnYiLCJzZXQiLCJ0ZXN0VmFsdWUiLCJnZXQiLCJlcnIiLCJlcnJvciIsImtleSIsInZhbHVlIiwid2FybiIsImRlbCIsInNjYW4iLCJjdXJzb3IiLCJvcHRpb25zIiwia2V5cyIsInBhdHRlcm4iLCJsb2NhbENhY2hlIiwiTWFwIiwic2V0S1YiLCJnZXRLViIsImNhY2hlZFZhbHVlIiwiSlNPTiIsInBhcnNlIiwiZGVsZXRlS1YiLCJkZWxldGUiLCJnZXRTZWNyZXQiLCJzZWNyZXRJZCIsImVtYWlsIiwiY3JlYXRlZEF0IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwic2V0U2VjcmV0Iiwic2VjcmV0IiwiZGVsZXRlU2VjcmV0IiwiZ2V0QWxsU2VjcmV0cyIsInNlY3JldHMiLCJyZXN1bHQiLCJtYXRjaCIsImNvdW50IiwicGFyc2VJbnQiLCJpbmNsdWRlcyIsInJlcGxhY2UiLCJwdXNoIiwiYWRkVm90ZSIsInZvdGUiLCJzdHJpbmdpZnkiLCJnZXRBbGxWb3RlcyIsInZvdGVzIiwidm90ZUpzb24iLCJwYXJzZUVycm9yIiwiZ2V0Vm90ZUNvdW50IiwibGVuZ3RoIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/kv-storage.ts\n");

/***/ }),

/***/ "(rsc)/./lib/store.ts":
/*!**********************!*\
  !*** ./lib/store.ts ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addSecret: () => (/* binding */ addSecret),\n/* harmony export */   addVote: () => (/* binding */ addVote),\n/* harmony export */   findSecretIdByEmail: () => (/* binding */ findSecretIdByEmail),\n/* harmony export */   isSecretValid: () => (/* binding */ isSecretValid),\n/* harmony export */   removeSecret: () => (/* binding */ removeSecret)\n/* harmony export */ });\n/* harmony import */ var _lib_kv_storage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/kv-storage */ \"(rsc)/./lib/kv-storage.ts\");\n\n// Save a vote\nasync function addVote({ secretId, encryptedVote, timestamp }) {\n    try {\n        await (0,_lib_kv_storage__WEBPACK_IMPORTED_MODULE_0__.setKV)(`vote:${secretId}`, JSON.stringify({\n            secretId,\n            encryptedVote,\n            timestamp\n        }));\n    } catch (error) {\n        console.error(`Error saving vote for secret ID ${secretId}:`, error);\n        throw error;\n    }\n}\n// Validate a secret\nasync function isSecretValid(secretId) {\n    try {\n        console.log(`Checking if secret ID is valid: ${secretId}`);\n        const email = await (0,_lib_kv_storage__WEBPACK_IMPORTED_MODULE_0__.getKV)(`secret:${secretId}`);\n        console.log(`Email for secret ID ${secretId}: ${email}`);\n        return !!email;\n    } catch (error) {\n        console.error(`Error validating secret with ID ${secretId}:`, error);\n        return false;\n    }\n}\n// Remove a secret\nasync function removeSecret(secretId) {\n    try {\n        await (0,_lib_kv_storage__WEBPACK_IMPORTED_MODULE_0__.deleteKV)(`secret:${secretId}`);\n    } catch (error) {\n        console.error(`Error removing secret with ID ${secretId}:`, error);\n        throw error;\n    }\n}\n// Find secret ID by email\nasync function findSecretIdByEmail(email) {\n    try {\n        return await (0,_lib_kv_storage__WEBPACK_IMPORTED_MODULE_0__.getKV)(`email:${email}`);\n    } catch (error) {\n        console.error(`Error finding secret ID for email ${email}:`, error);\n        return null;\n    }\n}\n// Save a new secret\nasync function addSecret(secretId, email) {\n    try {\n        await (0,_lib_kv_storage__WEBPACK_IMPORTED_MODULE_0__.setKV)(`email:${email}`, secretId);\n        await (0,_lib_kv_storage__WEBPACK_IMPORTED_MODULE_0__.setKV)(`secret:${secretId}`, email);\n    } catch (error) {\n        console.error(`Error adding secret for email ${email}:`, error);\n        throw error;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc3RvcmUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQTBEO0FBRTFELGNBQWM7QUFDUCxlQUFlRyxRQUFRLEVBQUVDLFFBQVEsRUFBRUMsYUFBYSxFQUFFQyxTQUFTLEVBQWtFO0lBQ2xJLElBQUk7UUFDRixNQUFNTCxzREFBS0EsQ0FBQyxDQUFDLEtBQUssRUFBRUcsVUFBVSxFQUFFRyxLQUFLQyxTQUFTLENBQUM7WUFBRUo7WUFBVUM7WUFBZUM7UUFBVTtJQUN0RixFQUFFLE9BQU9HLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLENBQUMsZ0NBQWdDLEVBQUVMLFNBQVMsQ0FBQyxDQUFDLEVBQUVLO1FBQzlELE1BQU1BO0lBQ1I7QUFDRjtBQUVBLG9CQUFvQjtBQUNiLGVBQWVFLGNBQWNQLFFBQWdCO0lBQ2xELElBQUk7UUFDRk0sUUFBUUUsR0FBRyxDQUFDLENBQUMsZ0NBQWdDLEVBQUVSLFVBQVU7UUFDekQsTUFBTVMsUUFBUSxNQUFNYixzREFBS0EsQ0FBUyxDQUFDLE9BQU8sRUFBRUksVUFBVTtRQUN0RE0sUUFBUUUsR0FBRyxDQUFDLENBQUMsb0JBQW9CLEVBQUVSLFNBQVMsRUFBRSxFQUFFUyxPQUFPO1FBQ3ZELE9BQU8sQ0FBQyxDQUFDQTtJQUNYLEVBQUUsT0FBT0osT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsQ0FBQyxnQ0FBZ0MsRUFBRUwsU0FBUyxDQUFDLENBQUMsRUFBRUs7UUFDOUQsT0FBTztJQUNUO0FBQ0Y7QUFFQSxrQkFBa0I7QUFDWCxlQUFlSyxhQUFhVixRQUFnQjtJQUNqRCxJQUFJO1FBQ0YsTUFBTUYseURBQVFBLENBQUMsQ0FBQyxPQUFPLEVBQUVFLFVBQVU7SUFDckMsRUFBRSxPQUFPSyxPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyxDQUFDLDhCQUE4QixFQUFFTCxTQUFTLENBQUMsQ0FBQyxFQUFFSztRQUM1RCxNQUFNQTtJQUNSO0FBQ0Y7QUFFQSwwQkFBMEI7QUFDbkIsZUFBZU0sb0JBQW9CRixLQUFhO0lBQ3JELElBQUk7UUFDRixPQUFPLE1BQU1iLHNEQUFLQSxDQUFTLENBQUMsTUFBTSxFQUFFYSxPQUFPO0lBQzdDLEVBQUUsT0FBT0osT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsQ0FBQyxrQ0FBa0MsRUFBRUksTUFBTSxDQUFDLENBQUMsRUFBRUo7UUFDN0QsT0FBTztJQUNUO0FBQ0Y7QUFFQSxvQkFBb0I7QUFDYixlQUFlTyxVQUFVWixRQUFnQixFQUFFUyxLQUFhO0lBQzdELElBQUk7UUFDRixNQUFNWixzREFBS0EsQ0FBQyxDQUFDLE1BQU0sRUFBRVksT0FBTyxFQUFFVDtRQUM5QixNQUFNSCxzREFBS0EsQ0FBQyxDQUFDLE9BQU8sRUFBRUcsVUFBVSxFQUFFUztJQUNwQyxFQUFFLE9BQU9KLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLENBQUMsOEJBQThCLEVBQUVJLE1BQU0sQ0FBQyxDQUFDLEVBQUVKO1FBQ3pELE1BQU1BO0lBQ1I7QUFDRiIsInNvdXJjZXMiOlsiL1VzZXJzL21hcmlhbS9EZXNrdG9wL3Nhd3R5L3Nhd3R5LXZvdGluZy9saWIvc3RvcmUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0S1YsIHNldEtWLCBkZWxldGVLViB9IGZyb20gXCJAL2xpYi9rdi1zdG9yYWdlXCI7XG5cbi8vIFNhdmUgYSB2b3RlXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYWRkVm90ZSh7IHNlY3JldElkLCBlbmNyeXB0ZWRWb3RlLCB0aW1lc3RhbXAgfTogeyBzZWNyZXRJZDogc3RyaW5nLCBlbmNyeXB0ZWRWb3RlOiBzdHJpbmcsIHRpbWVzdGFtcDogc3RyaW5nIH0pIHtcbiAgdHJ5IHtcbiAgICBhd2FpdCBzZXRLVihgdm90ZToke3NlY3JldElkfWAsIEpTT04uc3RyaW5naWZ5KHsgc2VjcmV0SWQsIGVuY3J5cHRlZFZvdGUsIHRpbWVzdGFtcCB9KSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihgRXJyb3Igc2F2aW5nIHZvdGUgZm9yIHNlY3JldCBJRCAke3NlY3JldElkfTpgLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuLy8gVmFsaWRhdGUgYSBzZWNyZXRcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpc1NlY3JldFZhbGlkKHNlY3JldElkOiBzdHJpbmcpIHtcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZyhgQ2hlY2tpbmcgaWYgc2VjcmV0IElEIGlzIHZhbGlkOiAke3NlY3JldElkfWApO1xuICAgIGNvbnN0IGVtYWlsID0gYXdhaXQgZ2V0S1Y8c3RyaW5nPihgc2VjcmV0OiR7c2VjcmV0SWR9YCk7XG4gICAgY29uc29sZS5sb2coYEVtYWlsIGZvciBzZWNyZXQgSUQgJHtzZWNyZXRJZH06ICR7ZW1haWx9YCk7XG4gICAgcmV0dXJuICEhZW1haWw7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihgRXJyb3IgdmFsaWRhdGluZyBzZWNyZXQgd2l0aCBJRCAke3NlY3JldElkfTpgLCBlcnJvcik7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbi8vIFJlbW92ZSBhIHNlY3JldFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlbW92ZVNlY3JldChzZWNyZXRJZDogc3RyaW5nKSB7XG4gIHRyeSB7XG4gICAgYXdhaXQgZGVsZXRlS1YoYHNlY3JldDoke3NlY3JldElkfWApO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIHJlbW92aW5nIHNlY3JldCB3aXRoIElEICR7c2VjcmV0SWR9OmAsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG4vLyBGaW5kIHNlY3JldCBJRCBieSBlbWFpbFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZpbmRTZWNyZXRJZEJ5RW1haWwoZW1haWw6IHN0cmluZykge1xuICB0cnkge1xuICAgIHJldHVybiBhd2FpdCBnZXRLVjxzdHJpbmc+KGBlbWFpbDoke2VtYWlsfWApO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGZpbmRpbmcgc2VjcmV0IElEIGZvciBlbWFpbCAke2VtYWlsfTpgLCBlcnJvcik7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLy8gU2F2ZSBhIG5ldyBzZWNyZXRcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhZGRTZWNyZXQoc2VjcmV0SWQ6IHN0cmluZywgZW1haWw6IHN0cmluZykge1xuICB0cnkge1xuICAgIGF3YWl0IHNldEtWKGBlbWFpbDoke2VtYWlsfWAsIHNlY3JldElkKTtcbiAgICBhd2FpdCBzZXRLVihgc2VjcmV0OiR7c2VjcmV0SWR9YCwgZW1haWwpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGFkZGluZyBzZWNyZXQgZm9yIGVtYWlsICR7ZW1haWx9OmAsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuIl0sIm5hbWVzIjpbImdldEtWIiwic2V0S1YiLCJkZWxldGVLViIsImFkZFZvdGUiLCJzZWNyZXRJZCIsImVuY3J5cHRlZFZvdGUiLCJ0aW1lc3RhbXAiLCJKU09OIiwic3RyaW5naWZ5IiwiZXJyb3IiLCJjb25zb2xlIiwiaXNTZWNyZXRWYWxpZCIsImxvZyIsImVtYWlsIiwicmVtb3ZlU2VjcmV0IiwiZmluZFNlY3JldElkQnlFbWFpbCIsImFkZFNlY3JldCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/store.ts\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/next@15.2.4_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fdebug-add-secret%2Froute&page=%2Fapi%2Fdebug-add-secret%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdebug-add-secret%2Froute.ts&appDir=%2FUsers%2Fmariam%2FDesktop%2Fsawty%2Fsawty-voting%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmariam%2FDesktop%2Fsawty%2Fsawty-voting&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@15.2.4_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fdebug-add-secret%2Froute&page=%2Fapi%2Fdebug-add-secret%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdebug-add-secret%2Froute.ts&appDir=%2FUsers%2Fmariam%2FDesktop%2Fsawty%2Fsawty-voting%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmariam%2FDesktop%2Fsawty%2Fsawty-voting&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/.pnpm/next@15.2.4_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/.pnpm/next@15.2.4_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/.pnpm/next@15.2.4_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_mariam_Desktop_sawty_sawty_voting_app_api_debug_add_secret_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/debug-add-secret/route.ts */ \"(rsc)/./app/api/debug-add-secret/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/debug-add-secret/route\",\n        pathname: \"/api/debug-add-secret\",\n        filename: \"route\",\n        bundlePath: \"app/api/debug-add-secret/route\"\n    },\n    resolvedPagePath: \"/Users/mariam/Desktop/sawty/sawty-voting/app/api/debug-add-secret/route.ts\",\n    nextConfigOutput,\n    userland: _Users_mariam_Desktop_sawty_sawty_voting_app_api_debug_add_secret_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vbmV4dEAxNS4yLjRfcmVhY3QtZG9tQDE5LjEuMF9yZWFjdEAxOS4xLjBfX3JlYWN0QDE5LjEuMC9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZkZWJ1Zy1hZGQtc2VjcmV0JTJGcm91dGUmcGFnZT0lMkZhcGklMkZkZWJ1Zy1hZGQtc2VjcmV0JTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGZGVidWctYWRkLXNlY3JldCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRm1hcmlhbSUyRkRlc2t0b3AlMkZzYXd0eSUyRnNhd3R5LXZvdGluZyUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZtYXJpYW0lMkZEZXNrdG9wJTJGc2F3dHklMkZzYXd0eS12b3RpbmcmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ3FCO0FBQzBCO0FBQ3ZHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix5R0FBbUI7QUFDM0M7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0RBQXNEO0FBQzlEO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzBGOztBQUUxRiIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvbWFyaWFtL0Rlc2t0b3Avc2F3dHkvc2F3dHktdm90aW5nL2FwcC9hcGkvZGVidWctYWRkLXNlY3JldC9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvZGVidWctYWRkLXNlY3JldC9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2RlYnVnLWFkZC1zZWNyZXRcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2RlYnVnLWFkZC1zZWNyZXQvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvbWFyaWFtL0Rlc2t0b3Avc2F3dHkvc2F3dHktdm90aW5nL2FwcC9hcGkvZGVidWctYWRkLXNlY3JldC9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHdvcmtBc3luY1N0b3JhZ2UsXG4gICAgICAgIHdvcmtVbml0QXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/next@15.2.4_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fdebug-add-secret%2Froute&page=%2Fapi%2Fdebug-add-secret%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdebug-add-secret%2Froute.ts&appDir=%2FUsers%2Fmariam%2FDesktop%2Fsawty%2Fsawty-voting%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmariam%2FDesktop%2Fsawty%2Fsawty-voting&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/next@15.2.4_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!*********************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@15.2.4_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \*********************************************************************************************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/next@15.2.4_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!*********************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@15.2.4_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \*********************************************************************************************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next@15.2.4_react-dom@19.1.0_react@19.1.0__react@19.1.0","vendor-chunks/@upstash+redis@1.34.8","vendor-chunks/crypto-js@4.2.0"], () => (__webpack_exec__("(rsc)/./node_modules/.pnpm/next@15.2.4_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fdebug-add-secret%2Froute&page=%2Fapi%2Fdebug-add-secret%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fdebug-add-secret%2Froute.ts&appDir=%2FUsers%2Fmariam%2FDesktop%2Fsawty%2Fsawty-voting%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmariam%2FDesktop%2Fsawty%2Fsawty-voting&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();